ã€æœ€çµ‚ç‰ˆå°ˆæ¡ˆå»ºé€ æŒ‡ä»¤ â€” Replit å°ˆæ¥­å·¥ç¨‹èªè¨€ã€‘
ğŸ—ï¸ å°ˆæ¡ˆåç¨±

SemanticMemoryUploaderMini

ğŸ¯ ä»»å‹™ç›®æ¨™

å»ºç«‹ä¸€å€‹å¯åœ¨ æœ¬åœ°ç«¯æˆ– Replit ç’°å¢ƒåŸ·è¡Œçš„ Streamlit æ‡‰ç”¨ç¨‹å¼ï¼Œ
åç¨±ç‚ºã€ŒğŸŒŒ èªç¾©è¨˜æ†¶ä¸Šå‚³å™¨ miniã€ï¼Œ
ç”¨é€”ç‚ºï¼šå°‡æ‰‹å‹•ä¸Šå‚³çš„ .txt å°è©±è¨˜éŒ„è‡ªå‹•ç”Ÿæˆæ‘˜è¦ã€ä¸Šå‚³è‡³ Pinata IPFSï¼Œ
ä¸¦æŠŠçµæœè¨˜éŒ„åˆ°æŒ‡å®šçš„ Google Sheetsã€‚

ğŸ§© ç³»çµ±æ¶æ§‹è¨­è¨ˆ

å°ˆæ¡ˆæ‡‰åŒ…å«ä»¥ä¸‹æ¨¡çµ„ï¼š

SemanticMemoryUploaderMini/
â”œâ”€â”€ app.py                # ä¸»ç¨‹å¼ï¼Œè² è²¬ UI èˆ‡æµç¨‹æ§åˆ¶
â”œâ”€â”€ ipfs_tools.py         # ä¸Šå‚³æª”æ¡ˆè‡³ Pinata IPFS
â”œâ”€â”€ summarizer.py         # ç”Ÿæˆä¸­æ–‡æ‘˜è¦ï¼ˆç°¡æ˜“è¦å‰‡ï¼‰
â”œâ”€â”€ record_store.py       # å¯«å…¥ Google Sheets
â”œâ”€â”€ requirements.txt      # å¥—ä»¶ä¾è³´æ¸…å–®
â””â”€â”€ .env.example          # ç’°å¢ƒè®Šæ•¸ç¯„ä¾‹è¨­å®š

âš™ï¸ ç³»çµ±éœ€æ±‚

åŸ·è¡Œç’°å¢ƒï¼šPython 3.10+

å‰ç«¯æ¡†æ¶ï¼šStreamlit

ä¸Šå‚³ä»‹é¢ï¼šæ”¯æ´ .txt æª”

ä¸Šå‚³ç«¯é»ï¼šhttps://api.pinata.cloud/pinning/pinFileToIPFS

è¨˜éŒ„å„²å­˜ï¼šGoogle Sheetsï¼ˆé€é Service Account é©—è­‰ï¼‰

ğŸ“œ åŠŸèƒ½èªªæ˜èˆ‡é‚è¼¯æµç¨‹

ä½¿ç”¨è€…é–‹å•Ÿ app.py â†’ Streamlit UI å‡ºç¾ã€‚

ä½¿ç”¨è€…ä¸Šå‚³ä¸€å€‹ .txt æª”æ¡ˆã€‚

ç³»çµ±è®€å–å…§å®¹ â†’ å‘¼å« summarizer.generate_summary(text) ç”¢å‡ºç°¡çŸ­ä¸­æ–‡æ‘˜è¦ã€‚

å‘¼å« ipfs_tools.upload_to_ipfs(file_path)ï¼š

ä½¿ç”¨ .env å…§çš„ PINATA_JWT é€²è¡Œé©—è­‰ã€‚

æˆåŠŸå¾Œå›å‚³ CID èˆ‡ Gateway URLã€‚

å‘¼å« record_store.save_record(data)ï¼š

ä½¿ç”¨ .env å…§çš„ SERVICE_ACCOUNT_JSONï¼ˆä»¥ä¸€è¡Œ JSON å­—ä¸²å½¢å¼å­˜ï¼‰
èˆ‡ SPREADSHEET_ID é€²è¡Œæˆæ¬Šã€‚

å¯«å…¥ä¸€ç­†è¨˜éŒ„ï¼š
[timestamp, filename, summary, cid, gateway_url]

Streamlit é¡¯ç¤ºçµæœï¼š

âœ… ä¸­æ–‡æ‘˜è¦

ğŸ“¦ CID

ğŸŒ å¯é»æ“Š Gateway é€£çµ

ğŸ’¾ æˆåŠŸå¯«å…¥ Google Sheets æç¤ºè¨Šæ¯

ğŸª¶ æ¨¡çµ„åŠŸèƒ½å®šç¾©
1ï¸âƒ£ ipfs_tools.py

å‡½å¼ï¼šupload_to_ipfs(file_path) -> dict

è¡Œç‚ºï¼š

ä½¿ç”¨ requests.post() å‘¼å« Pinata APIã€‚

æ¨™é ­ï¼šAuthorization: Bearer <PINATA_JWT>

å›å‚³æ ¼å¼ï¼š

{"cid": "Qmxxxx", "gateway": "https://gateway.pinata.cloud/ipfs/Qmxxxx"}


éŒ¯èª¤è™•ç†ï¼š

è‹¥ JWT ç„¡æ•ˆã€API å›å‚³é 200ï¼Œæ‹‹å‡º RuntimeErrorã€‚

2ï¸âƒ£ summarizer.py

å‡½å¼ï¼šgenerate_summary(text, max_length=120)

è¡Œç‚ºï¼š

å–å‰ 2~3 è¡Œéç©ºå…§å®¹çµ„æˆæ‘˜è¦ã€‚

è‹¥è¶…éå­—æ•¸é™åˆ¶å‰‡æˆªæ–·åŠ ã€Œ...ã€ã€‚

å›å‚³ç´”æ–‡å­—æ‘˜è¦ã€‚

3ï¸âƒ£ record_store.py

å‡½å¼ï¼šsave_record(record: dict) -> bool

è¡Œç‚ºï¼š

é€é google.oauth2.service_account èˆ‡ gspread å¯«å…¥ Google Sheetsã€‚

æ¬„ä½é †åºï¼štimestamp, filename, summary, cid, gateway_url

è‹¥ç¼ºå°‘ç’°å¢ƒè®Šæ•¸å‰‡å ±éŒ¯ã€‚

4ï¸âƒ£ app.py

é¡¯ç¤º Streamlit UIï¼š

æ¨™é¡Œï¼šã€ŒğŸŒŒ èªç¾©è¨˜æ†¶ä¸Šå‚³å™¨ miniã€

æª”æ¡ˆä¸Šå‚³å™¨ (st.file_uploader) æ¥å— .txtã€‚

æŒ‰éˆ•ï¼šã€Œä¸Šå‚³è¨˜æ†¶åˆ° IPFSã€ã€‚

æˆåŠŸå¾Œé¡¯ç¤ºï¼š

CID

Gateway URLï¼ˆå¯é»æ“Šï¼‰

ä¸­æ–‡æ‘˜è¦

å…¨æµç¨‹è‡ªå‹•ä¸²æ¥ä¸Šè¿°ä¸‰å€‹æ¨¡çµ„ã€‚

ğŸ§¾ .env.example
PINATA_JWT=ä½ çš„PinataToken
SERVICE_ACCOUNT_JSON={"type":"service_account","project_id":"xxx","private_key_id":"xxx","private_key":"-----BEGIN PRIVATE KEY-----\\n..."}
SPREADSHEET_ID=ä½ çš„Googleè©¦ç®—è¡¨ID

ğŸ“¦ requirements.txt
streamlit
requests
gspread
google-auth
python-dotenv

ğŸš€ å•Ÿå‹•æ–¹å¼
pip install -r requirements.txt
streamlit run app.py


é–‹å•Ÿ Streamlit ç¶²é å¾Œå³å¯æ“ä½œã€‚

ğŸ§  é¡å¤–è¦ç¯„

ç¨‹å¼éœ€æ¸…æ™°è¨»è§£ï¼Œèªªæ˜æ¯å€‹å‡½å¼çš„ç”¨é€”èˆ‡é‚è¼¯ã€‚

æ‰€æœ‰ç•°å¸¸ç‹€æ³é ˆå›å‚³æ˜“æ‡‚çš„éŒ¯èª¤è¨Šæ¯ï¼ˆä¸­æ–‡ç‚ºä¸»ï¼‰ã€‚

æ‰€æœ‰è·¯å¾‘èˆ‡ç’°å¢ƒè®Šæ•¸è«‹ä½¿ç”¨ os.getenv()ã€‚

è‹¥ .env ç¼ºå°‘å¿…è¦è¨­å®šï¼Œç¨‹å¼æ‡‰æ–¼å•Ÿå‹•æ™‚çµ¦å‡ºæé†’ã€‚

âœ… æœ€çµ‚è¼¸å‡º

ä¸€å€‹å¯ç›´æ¥åœ¨ Replit åŸ·è¡Œçš„å®Œæ•´å°ˆæ¡ˆã€‚

å•Ÿå‹•å¾Œå‡ºç¾ï¼š

ä¸€å€‹ Streamlit ä»‹é¢ã€‚

å¯ä¸Šå‚³ .txtã€‚

è‡ªå‹•æ‘˜è¦ã€ä¸Šå‚³ã€é¡¯ç¤º CIDã€‚

æˆåŠŸå¯«å…¥ Google Sheetsã€‚

æ‰€æœ‰ç¨‹å¼ç¢¼é¢¨æ ¼ç°¡æ½”ä¸€è‡´ï¼Œæ¡ PEP8 æ¨™æº–ã€‚