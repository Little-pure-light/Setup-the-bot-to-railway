# è¨˜æ†¶æ¨¡çµ„ (Memory Module)

## ğŸ“ æ¨¡çµ„èªªæ˜

è¨˜æ†¶æ¨¡çµ„æ˜¯å°å®¸å…‰ç³»çµ±çš„æ ¸å¿ƒè³‡æ–™å±¤ï¼Œè² è²¬ï¼š
- çŸ­æœŸè¨˜æ†¶ï¼ˆRedis ç·©å­˜ï¼‰
- é•·æœŸè¨˜æ†¶ï¼ˆSupabase è³‡æ–™åº«ï¼‰
- æ–‡å­— Token åŒ–è™•ç†
- è¨˜æ†¶å¬å›èˆ‡æª¢ç´¢

## ğŸ¯ ä¸»è¦åŠŸèƒ½

### 1. å°è©±å„²å­˜
- è‡ªå‹•å°‡å°è©±å…§å®¹ Token åŒ–
- å„²å­˜è‡³ Redis ä½œç‚ºçŸ­æœŸè¨˜æ†¶ï¼ˆ24å°æ™‚ï¼‰
- åŒæ­¥è‡³ Supabase ä½œç‚ºé•·æœŸè¨˜æ†¶

### 2. è¨˜æ†¶å¬å›
- å¾ Redis å¿«é€Ÿå¬å›æœ€è¿‘å°è©±
- æ”¯æ´èªç¾©æœå°‹ï¼ˆå‘é‡ç›¸ä¼¼åº¦ï¼‰

### 3. Token åŒ–
- ä½¿ç”¨ tiktoken é€²è¡Œç²¾ç¢º Token è¨ˆæ•¸
- æ”¯æ´å­—å…ƒæ•¸ä¼°ç®—å‚™æ´æ–¹æ¡ˆ

## ğŸ”§ é…ç½®é¸é …

åƒè€ƒ `config.json`:
- `redis_ttl`: Redis ç·©å­˜éæœŸæ™‚é–“ï¼ˆç§’ï¼‰
- `max_token_length`: æœ€å¤§ Token é•·åº¦é™åˆ¶
- `embedding_model`: å‘é‡åŒ–æ¨¡å‹åç¨±

## ğŸ“¡ API æ¥å£

### å„²å­˜å°è©±
```python
data = {
    "operation": "store_conversation",
    "conversation_id": "conv_001",
    "user_message": "ä½ å¥½",
    "assistant_message": "ä½ å¥½ï¼",
    "reflection": "å›æ‡‰é©ç•¶"
}
```

### å¬å›è¨˜æ†¶
```python
data = {
    "operation": "retrieve_memory",
    "conversation_id": "conv_001"
}
```
